"use strict";(self.webpackChunkTestMaker_Administrator=self.webpackChunkTestMaker_Administrator||[]).push([[601],{1601:(Q,v,s)=>{s.r(v),s.d(v,{EventModule:()=>D});var r=s(6895),C=s(529),l=s(490),m=s(4006),a=s(778),y=s(5434),h=s(8055),d=s(9782),e=s(4650),f=s(2447),T=s(3454),c=s(4795),I=s(5715),E=s(2071),u=s(4272);function S(t,o){if(1&t&&(e.ynx(0),e._UZ(1,"app-table",1),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("config",n.tableConfig)}}function H(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"app-layout"),e._UZ(2,"app-table",1),e.qZA(),e.BQk()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("config",n.tableConfig)}}let P=(()=>{class t{constructor(n){this.candidatesService=n,this.pageHelper=new d.M("/event/candidate"),this.tableConfig={title:"Danh s\xe1ch th\xed sinh",url:"api/Event/Admin/Candidates",buttons:[{title:"Th\xeam",event:i=>{this.candidatesService.createCandidate({eventId:this.eventId}).subscribe(()=>{window.location.reload()})}}],columns:[{property:"code",title:"M\xe3",text:"[code]"},{property:"answer",title:"",text:"C\xe2u tr\u1ea3 l\u1eddi",link:{url:this.pageHelper.getDetailsPage("[candidateId]")}}]}}ngOnInit(){this.eventId&&(this.tableConfig.url=`api/Event/Admin/Candidates?eventId=${this.eventId}`)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(E.o))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-candidates"]],inputs:{eventId:"eventId"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"config"]],template:function(n,i){1&n&&(e.YNc(0,S,2,1,"ng-container",0),e.YNc(1,H,3,1,"ng-container",0)),2&n&&(e.Q6J("ngIf",i.eventId),e.xp6(1),e.Q6J("ngIf",!i.eventId))},dependencies:[r.O5,c.$,u.a],encapsulation:2}),t})();function x(t,o){if(1&t&&e._UZ(0,"app-candidates",2),2&t){const n=e.oxw();e.Q6J("eventId",n.eventId)}}let g=(()=>{class t{constructor(n,i,p){this.eventsService=n,this.testsService=i,this.router=p,this.pageHelper=new d.M("/event/event"),this.formScopeType=new a.i({title:"Ph\u1ea1m vi s\u1ef1 ki\u1ec7n",options:[],order:2,events:{}}),this.formquestionContentType=new a.i({title:"N\u1ed9i dung s\u1ef1 ki\u1ec7n",options:[],order:3,events:{}}),this.formMarkingType=new a.i({title:"Ki\u1ec3u ch\u1ea5m",options:[],order:4,events:{}}),this.formTestId=new a.i({title:"B\xe0i ki\u1ec3m tra",options:[],order:5,events:{}}),this.formConfig={id:"eventForm",title:this.title,buttons:[{title:"Danh s\xe1ch",link:{url:this.pageHelper.getListPage()}},this.pageHelper.isEditingPage?{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getDetailsPage(this.eventId)}}:null,{title:this.pageHelper.isDetailsPage?"S\u1eeda":this.pageHelper.isEditingPage?"L\u01b0u":"Th\xeam",link:this.pageHelper.isDetailsPage?{url:this.pageHelper.getEditingPage(this.eventId)}:null,event:this.pageHelper.isDetailsPage?null:A=>{this.onSubmit(A)}}],form:new m.cw({eventId:new y.W(""),name:new h.y({title:"T\xean",order:1,validatorOrOpts:m.kI.required}),scopeType:this.formScopeType,questionContentType:this.formquestionContentType,markingType:this.formMarkingType,testId:this.formTestId})}}get eventId(){const n=location.href.split("/");return n[n.length-1]}get title(){return this.pageHelper.isCreatingPage?"Th\xeam s\u1ef1 ki\u1ec7n":this.pageHelper.isDetailsPage?"Th\xf4ng tin s\u1ef1 ki\u1ec7n":"S\u1eeda s\u1ef1 ki\u1ec7n"}ngOnInit(){if(this.testsService.getEventScopeType().subscribe(i=>{this.formScopeType.params.options=i}),this.testsService.getEventQuestionContentType().subscribe(i=>{this.formquestionContentType.params.options=i}),this.testsService.getEventMarkingType().subscribe(i=>{this.formMarkingType.params.options=i}),this.testsService.getTestsAsSelectOptions().subscribe(i=>{this.formTestId.params.options=i}),!this.pageHelper.isCreatingPage&&(this.formConfig.form.addControl("code",new h.y({title:"M\xe3",order:2})),this.eventsService.getEvent(this.eventId).subscribe(i=>{this.formConfig.form.setValue(i)}),this.pageHelper.isEditingPage)){var n=this.formConfig.form.get("code");n&&n.disable()}this.pageHelper.isDetailsPage&&this.formConfig.form.disable()}onSubmit(n){const i=this.formConfig.form.value;this.pageHelper.isCreatingPage&&this.eventsService.createEvent({name:i.name,scopeType:i.scopeType,questionContentType:i.questionContentType,markingType:i.markingType,testId:i.testId}).subscribe(p=>{this.router.navigate([this.pageHelper.getDetailsPage(p.eventId)])}),this.pageHelper.isEditingPage&&this.eventsService.editEvent({eventId:i.eventId,name:i.name,scopeType:i.scopeType,questionContentType:i.questionContentType,markingType:i.markingType,testId:i.testId}).subscribe(()=>{this.router.navigate([this.pageHelper.getDetailsPage(i.eventId)])})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.n),e.Y36(T.$x),e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-event"]],decls:3,vars:2,consts:[[3,"config"],[3,"eventId",4,"ngIf"],[3,"eventId"]],template:function(n,i){1&n&&(e.TgZ(0,"app-layout"),e._UZ(1,"app-form",0),e.YNc(2,x,1,1,"app-candidates",1),e.qZA()),2&n&&(e.xp6(1),e.Q6J("config",i.formConfig),e.xp6(1),e.Q6J("ngIf",i.pageHelper.isDetailsPage))},dependencies:[r.O5,c.$,I.U,P],encapsulation:2}),t})();const b=[{path:"event-list",component:(()=>{class t{constructor(n){this.eventsService=n,this.pageHelper=new d.M("/event/event"),this.tableConfig={title:"Danh s\xe1ch s\u1ef1 ki\u1ec7n",url:"api/Event/Admin/Events",recycleBinConfig:{enable:!0,deleteEvent:(i,p)=>this.eventsService.deleteEvent(i.eventId)},buttons:[{title:"Th\xeam",link:{url:this.pageHelper.getCreatingPage()}}],columns:[{property:"name",title:"T\xean",text:"[name]",link:{url:this.pageHelper.getDetailsPage("[eventId]")}},{property:"scopeType",title:"Ki\u1ec3u s\u1ef1 ki\u1ec7n",text:"[scopeType]"},{property:"code",title:"M\xe3",text:"[code]"}]}}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.n))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-event"]],decls:2,vars:1,consts:[[3,"config"]],template:function(n,i){1&n&&(e.TgZ(0,"app-layout"),e._UZ(1,"app-table",0),e.qZA()),2&n&&(e.xp6(1),e.Q6J("config",i.tableConfig))},dependencies:[c.$,u.a],encapsulation:2}),t})(),data:{title:"S\u1ef1 ki\u1ec7n"}},{path:"event-creating",component:g,data:{title:"S\u1ef1 ki\u1ec7n"}},{path:"event-details/:id",component:g,data:{title:"S\u1ef1 ki\u1ec7n"}},{path:"event-editing/:id",component:g,data:{title:"S\u1ef1 ki\u1ec7n"}}];let k=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(b),l.Bz]}),t})();var M=s(7793);let D=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[r.ez,k,M.u,C.JF]}),t})()}}]);