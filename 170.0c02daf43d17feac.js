"use strict";(self.webpackChunkTestMaker_Administrator=self.webpackChunkTestMaker_Administrator||[]).push([[170],{1170:(A,h,i)=>{i.r(h),i.d(h,{UserModule:()=>D});var I=i(6895),y=i(529),H=i(7793),a=i(490),l=i(4006),c=i(5434),u=i(8055),p=i(9782),o=i(4650),d=i(6893),g=i(4795),C=i(5715);let m=(()=>{class t{constructor(e,r){this.rolesService=e,this.router=r,this.pageHelper=new p.M("/user/role"),this.formConfigForm=new l.cw({roleId:new c.W(""),name:new u.y({title:"T\xe0i kho\u1ea3n",order:1,validatorOrOpts:l.kI.required})}),this.formConfig={id:"roleForm",title:this.formConfigTitle,buttons:this.formConfigButtons,form:this.formConfigForm}}get roleId(){const e=location.href.split("?")[0].split("/");return e[e.length-1]}get formConfigTitle(){return this.pageHelper.isCreatingPage?"Th\xeam quy\u1ec1n":this.pageHelper.isDetailsPage?"Th\xf4ng tin quy\u1ec1n":"S\u1eeda quy\u1ec1n"}get formConfigButtons(){return this.pageHelper.isCreatingPage?[{title:"L\u01b0u",event:e=>{this.rolesService.createRole(this.formConfig.form.value).subscribe(n=>{this.router.navigate([this.pageHelper.getDetailsPage(n.roleId)])})}},{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getListPage()}}]:this.pageHelper.isDetailsPage?[{title:"S\u1eeda",link:{url:this.pageHelper.getEditingPage(this.roleId)}},{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getListPage()}}]:this.pageHelper.isEditingPage?[{title:"L\u01b0u",event:e=>{this.rolesService.editRole(this.formConfig.form.value).subscribe(r=>{this.router.navigate([this.pageHelper.getDetailsPage(r.roleId)])})}},{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getDetailsPage(this.roleId)}}]:[]}ngOnInit(){this.pageHelper.isCreatingPage||this.rolesService.getRole(this.roleId).subscribe(e=>{this.formConfig.form.setValue(e)}),this.pageHelper.isDetailsPage&&this.formConfig.form.disable()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(d.f),o.Y36(a.F0))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-roles"]],decls:2,vars:1,consts:[[3,"config"]],template:function(e,r){1&e&&(o.TgZ(0,"app-layout"),o._UZ(1,"app-form",0),o.qZA()),2&e&&(o.xp6(1),o.Q6J("config",r.formConfig))},dependencies:[g.$,C.U],encapsulation:2}),t})();var v=i(4272);let P=(()=>{class t{constructor(){this.pageHelper=new p.M("/user/role"),this.addSectionButton={title:"Th\xeam",link:{url:this.pageHelper.getCreatingPage()}},this.tableConfig={title:"Danh s\xe1ch quy\u1ec1n",url:"api/User/Admin/Roles",buttons:[this.addSectionButton],columns:[{property:"name",title:"T\xean",text:"[name]",link:{url:this.pageHelper.getDetailsPage("[roleId]")}}]}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-roles"]],decls:2,vars:1,consts:[[3,"config"]],template:function(e,r){1&e&&(o.TgZ(0,"app-layout"),o._UZ(1,"app-table",0),o.qZA()),2&e&&(o.xp6(1),o.Q6J("config",r.tableConfig))},dependencies:[g.$,v.a],encapsulation:2}),t})();var R=i(778),U=i(9836),T=i(8300);let f=(()=>{class t{constructor(e,r,n){this.rolesService=e,this.usersService=r,this.router=n,this.pageHelper=new p.M("/user/user"),this.formConfigFormRoleIdsRoleId=new R.i({options:[],order:1,title:"Quy\u1ec1n",validatorOrOpts:l.kI.required}),this.formConfigFormRoleIds=new U.G({title:"Danh s\xe1ch quy\u1ec1n",order:3,columns:{roleId:this.formConfigFormRoleIdsRoleId},validatorOrOpts:l.kI.required}),this.formConfigForm=new l.cw({userId:new c.W(""),userName:new u.y({title:"T\xe0i kho\u1ea3n",order:1,validatorOrOpts:l.kI.required}),password:new u.y({title:"M\u1eadt kh\u1ea9u",order:2,validatorOrOpts:l.kI.required}),roles:this.formConfigFormRoleIds}),this.formConfig={id:"userForm",title:this.formConfigTitle,buttons:this.formConfigButtons,form:this.formConfigForm}}get userId(){const e=location.href.split("?")[0].split("/");return e[e.length-1]}get formConfigTitle(){return this.pageHelper.isCreatingPage?"Th\xeam t\xe0i kho\u1ea3n":this.pageHelper.isDetailsPage?"Th\xf4ng tin t\xe0i kho\u1ea3n":"S\u1eeda t\xe0i kho\u1ea3n"}get formConfigButtons(){return this.pageHelper.isCreatingPage?[{title:"L\u01b0u",event:e=>{const r=this.formConfig.form.value;r.roleIds=r.roles.map(n=>n.roleId),this.usersService.createUser(r).subscribe(n=>{this.router.navigate([this.pageHelper.getDetailsPage(n.userId)])})}},{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getListPage()}}]:this.pageHelper.isDetailsPage?[{title:"S\u1eeda",link:{url:this.pageHelper.getEditingPage(this.userId)}},{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getListPage()}}]:this.pageHelper.isEditingPage?[{title:"L\u01b0u",event:e=>{const r=this.formConfig.form.value;r.roleIds=r.roles.map(n=>n.roleId),this.usersService.editUser(r).subscribe(n=>{this.router.navigate([this.pageHelper.getDetailsPage(n.userId)])})}},{title:"Quay l\u1ea1i",link:{url:this.pageHelper.getDetailsPage(this.userId)}}]:[]}ngOnInit(){this.pageHelper.isCreatingPage||this.usersService.getUser(this.userId).subscribe(e=>{e.roleIds.forEach(r=>{this.formConfigFormRoleIds.addFormGroup()}),this.formConfig.form.setValue({userId:e.userId,userName:e.userName,password:e.password,roles:e.roleIds.map(r=>({roleId:r}))}),this.pageHelper.isDetailsPage&&this.formConfig.form.disable()}),this.rolesService.getRolesAsSelectOptions().subscribe(e=>{this.formConfigFormRoleIdsRoleId.params.options=e})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(d.f),o.Y36(T.f),o.Y36(a.F0))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-users"]],decls:2,vars:1,consts:[[3,"config"]],template:function(e,r){1&e&&(o.TgZ(0,"app-layout"),o._UZ(1,"app-form",0),o.qZA()),2&e&&(o.xp6(1),o.Q6J("config",r.formConfig))},dependencies:[g.$,C.U],encapsulation:2}),t})();const F=[{path:"user-list",component:(()=>{class t{constructor(){this.pageHelper=new p.M("/user/user"),this.addSectionButton={title:"Th\xeam",link:{url:this.pageHelper.getCreatingPage()}},this.tableConfig={title:"Danh s\xe1ch t\xe0i kho\u1ea3n",url:"api/User/Admin/Users",buttons:[this.addSectionButton],columns:[{property:"userName",title:"T\xe0i kho\u1ea3n",text:"[userName]",link:{url:this.pageHelper.getDetailsPage("[userId]")}}]}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-roles"]],decls:2,vars:1,consts:[[3,"config"]],template:function(e,r){1&e&&(o.TgZ(0,"app-layout"),o._UZ(1,"app-table",0),o.qZA()),2&e&&(o.xp6(1),o.Q6J("config",r.tableConfig))},dependencies:[g.$,v.a],encapsulation:2}),t})()},{path:"user-creating",component:f},{path:"user-details/:id",component:f},{path:"user-editing/:id",component:f},{path:"role-list",component:P},{path:"role-creating",component:m},{path:"role-details/:id",component:m},{path:"role-editing/:id",component:m}];let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[a.Bz.forChild(F),a.Bz]}),t})(),D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[I.ez,S,H.u,y.JF]}),t})()}}]);